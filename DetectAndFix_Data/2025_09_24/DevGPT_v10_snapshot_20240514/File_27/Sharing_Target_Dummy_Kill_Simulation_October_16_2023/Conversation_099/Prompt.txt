The comparisons in canCast and canDealDamage should subtract epsilon instead of add it. Whole code please.