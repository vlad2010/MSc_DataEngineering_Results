The global variable should be sharedCooldownValue, and that's what sharedCooldown should be set to inside the canCast if statement. Then sharedCooldown needs to be decremented at the end of the while loop.