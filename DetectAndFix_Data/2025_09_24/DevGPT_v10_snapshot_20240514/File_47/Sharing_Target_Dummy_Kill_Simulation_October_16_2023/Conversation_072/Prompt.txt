Please move the canDealDamage check to after the canCast check.