The comparison you made first:
if (std::abs(elapsedTime - lastCastTime) >= durationSeconds - epsilon)
was the right one.