Can you help explain to me what is going on in the piece of code below. It is used to find the product of Pythagorean triplets, given their sum. 


#include <iostream>


int main() {
    /* Enter your code here. Read input from STDIN. Print output to STDOUT */  
    int q{};
    std::cout << "How many times should this program be repeated: ";
    std::cin >> q; 
    for (int i{}; i < q; ++i) {
        int sumOfSides{};
        std::cin >> sumOfSides;
        if (sumOfSides < 12){
            std::cout << -1 << std::endl;
            continue;
        }
        // Euclid's formula 
        long long k{}, m{}, n{}, a{}, b{}, c{}, product{-1};
        for (n = 1; n < sumOfSides/3; ++n) {
            for (m = 1; m < sumOfSides; ++m) {
                a = 0; b = 0; c = 0;
                for (k = 1; a+b+c < sumOfSides; ++k) {
                    if (n < m)
                        a = (m*m - n*n)*k;
                    else
                        a = (n*n - m*m)*k;
                    b = (2*m*n)*k;
                    c = (m*m + n*n)*k;
                    if(a * a + b * b == c * c){
                        if(a * b * c > product) 
                            product = a * b * c;
                    }
                }
                if (a+b+c == sumOfSides && !(a == 0 || b == 0 || c == 0)){
                    break;
                }
            }
            if (a+b+c == sumOfSides && !(a == 0 || b == 0 || c == 0)){
                break;
            }
        }
        
        if (a+b+c == sumOfSides && !(a == 0 || b == 0 || c == 0)){
            size_t prod = a*b*c;
            std::cout << prod << std::endl;
        }else {
            std::cout << -1 << std::endl;
        }
    }
    return 0;
}
