Why are you doing this?

        while (!handler_invoked) {
            sigsuspend(&oldmask);
        }
